(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit"],{"0a0d":function(t,e,a){t.exports=a("e829")},"2f37":function(t,e,a){var n=a("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"73ba":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid grid",attrs:{"md-gutter":""}},[a("div",{staticClass:"grid-xl-8 grid-s-12"},[a("MdCard",[a("MdCardHeader",[t.$route.params.id?a("div",{staticClass:"md-title"},[t._v("\n          "+t._s(t.$lang.edit.title_edit)+"\n        ")]):a("div",{staticClass:"md-title"},[t._v("\n          "+t._s(t.$lang.edit.title_create)+"\n        ")])]),a("MdCardContent",[a("form",{attrs:{id:"contentForm"},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("MdField",{class:{"md-input-invalid":t.errors.has("title")}},[a("label",[t._v(t._s(t.$lang.edit.form.title))]),a("MdInput",{directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"text",name:"title","data-vv-rules":"required"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),a("span",{staticClass:"md-error"},[t._v("\n              "+t._s(t.errors.first("title"))+"\n            ")])],1),a("MdField",{class:{"md-input-invalid":t.errors.has("description")}},[a("label",[t._v("\n              "+t._s(t.$lang.edit.form.description)+"\n              "),a("span",[a("MdIcon",[t._v("help")]),a("MdTooltip",{attrs:{"md-direction":"right"}},[t._v("\n                  "+t._s(t.$lang.edit.form.description_tooltip)+"\n                ")])],1)]),a("MdTextarea",{directives:[{name:"validate",rawName:"v-validate"}],attrs:{name:"description","data-vv-rules":"max:500",maxlength:"500"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}}),a("span",{staticClass:"md-error"},[t._v("\n              "+t._s(t.errors.first("description"))+"\n            ")])],1),a("MdField",{class:{"md-input-invalid":t.errors.has("url")}},[a("label",[t._v(t._s(t.$lang.edit.form.url))]),a("MdInput",{directives:[{name:"validate",rawName:"v-validate"}],attrs:{name:"url","data-vv-rules":"required|url"},model:{value:t.data.url,callback:function(e){t.$set(t.data,"url",e)},expression:"data.url"}}),a("span",{staticClass:"md-error"},[t._v("\n              "+t._s(t.errors.first("url"))+"\n            ")])],1),a("MdField",{class:{"md-input-invalid":t.errors.has("thumbnail")}},[a("label",[t._v("\n              "+t._s(t.$lang.edit.form.thumbnail_url)+"\n              "),a("span",[a("MdIcon",[t._v("help")]),a("MdTooltip",{attrs:{"md-direction":"right"}},[t._v("\n                  "+t._s(t.$lang.edit.form.thumbnail_url_tooptip)+"\n                ")])],1)]),a("MdInput",{directives:[{name:"validate",rawName:"v-validate"}],attrs:{name:"thumbnail","data-vv-rules":"url"},model:{value:t.data.thumbnail,callback:function(e){t.$set(t.data,"thumbnail",e)},expression:"data.thumbnail"}}),a("span",{staticClass:"md-error"},[t._v("\n              "+t._s(t.errors.first("thumbnail"))+"\n            ")])],1),a("section",[a("MdChips",{attrs:{id:"license","md-max":10,"md-placeholder":t.$lang.edit.form.license+"... ("+t.$lang.edit.form.max+" 10)"},model:{value:t.data.licenses,callback:function(e){t.$set(t.data,"licenses",e)},expression:"data.licenses"}})],1),a("MdField",[a("label",{attrs:{for:"contentCategory"}},[t._v("\n              "+t._s(t.$lang.edit.form.categorie)+"\n            ")]),a("MdSelect",{attrs:{id:"contentCategory",name:"contentCategory"},model:{value:t.data.contentCategory,callback:function(e){t.$set(t.data,"contentCategory",e)},expression:"data.contentCategory"}},[a("MdOption",{attrs:{value:""}},[t._v("\n                /\n              ")]),a("MdOption",{attrs:{value:"atomic"}},[t._v("\n                Atomic\n              ")]),a("MdOption",{attrs:{value:"interactive"}},[t._v("\n                Interactive\n              ")])],1)],1),a("MdField",[a("label",{attrs:{for:"contentMimetype"}},[t._v("\n              "+t._s(t.$lang.edit.form.mimetype)+"\n            ")]),a("MdSelect",{attrs:{id:"contentMimetype",name:"contentCategory"},model:{value:t.data.mimeType,callback:function(e){t.$set(t.data,"mimeType",e)},expression:"data.mimeType"}},[a("MdOption",{attrs:{value:"application"}},[t._v("\n                application\n              ")]),a("MdOption",{attrs:{value:"audio"}},[t._v("\n                audio\n              ")]),a("MdOption",{attrs:{value:"example"}},[t._v("\n                example\n              ")]),a("MdOption",{attrs:{value:"image"}},[t._v("\n                image\n              ")]),a("MdOption",{attrs:{value:"message"}},[t._v("\n                message\n              ")]),a("MdOption",{attrs:{value:"model"}},[t._v("\n                model\n              ")]),a("MdOption",{attrs:{value:"multipart"}},[t._v("\n                multipart\n              ")]),a("MdOption",{attrs:{value:"text"}},[t._v("\n                text\n              ")]),a("MdOption",{attrs:{value:"video"}},[t._v("\n                video\n              ")])],1)],1),a("section",[a("MdChips",{attrs:{id:"tags","md-max":10,"md-placeholder":t.$lang.edit.form.tags+"... ("+t.$lang.edit.form.max+" 10)"},model:{value:t.data.tags,callback:function(e){t.$set(t.data,"tags",e)},expression:"data.tags"}})],1)],1)]),a("MdCardActions",[t.$route.params.id?a("MdButton",{staticClass:"delete",on:{click:function(e){t.dialog.active=!0}}},[t._v("\n          "+t._s(t.$lang.buttons.delete)+"\n        ")]):t._e(),a("ConfirmDialog",{attrs:{config:t.dialog},on:{confirm:t.deleteContent}}),a("MdButton",{staticStyle:{color:"initial"},on:{click:function(e){t.$router.go(-1)}}},[t._v("\n          "+t._s(t.$lang.buttons.cancel)+"\n        ")]),a("MdButton",{staticClass:"md-primary",attrs:{type:"submit",form:"contentForm"}},[t._v("\n          "+t._s(t.$lang.buttons.save)+"\n        ")])],1)],1)],1),a("div",{staticClass:"grid-xl-4 grid-s-12"},[a("div",{staticClass:"preview-wrapper"},[a("h2",[t._v(t._s(t.$lang.edit.livepreview)+":")]),a("ContentCard",{attrs:{data:t.data,"read-only":!0}})],1)])])},i=[],r=a("0a0d"),o=a.n(r),s=(a("6b54"),a("a026")),l=a("7bb1");s["default"].use(l["a"]);var d=function(){return a.e("ContentCard").then(a.bind(null,"d39d"))},c=function(){return a.e("ConfirmDialog").then(a.bind(null,"9135"))},u={name:"ContentForm",components:{ContentCard:d,ConfirmDialog:c},data:function(){return{data:{providerName:"",url:"",title:"",description:"",thumbnail:"",contentCategory:"",licenses:["Test License"],tags:[]},dialog:{active:!1,title:this.$lang.edit.dialog.title,content:this.$lang.edit.dialog.content,confirm:this.$lang.edit.dialog.confirm,cancle:this.$lang.edit.dialog.cancle},userInfo:JSON.parse(localStorage.getItem("userInfo"))||{}}},watch:{$route:function(){this.loadContent()}},created:function(){this.loadContent()},methods:{loadContent:function(){var t=this;this.$route.params.id?this.$http.get(this.$config.API.serverServerUrl+this.$config.API.getContentPath+this.$route.params.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then(function(e){t.data=e.data}).catch(function(e){t.errors.push(e)}):this.data={tags:[],licenses:[],providerName:this.userInfo.displayName.toString()}},validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.submitContent()})},submitContent:function(){var t,e=this,a=this.data,n={providerName:a.providerName,url:a.url,title:a.title,description:a.description,thumbnail:a.thumbnail,contentCategory:a.contentCategory,licenses:a.licenses,tags:a.tags,mimeType:a.mimeType};this.$route.params.id?t=this.$http.patch(this.$config.API.contentServerUrl+this.$config.API.pushContentPath+this.$route.params.id,n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}):(n.originId=o()().toString(),t=this.$http.post(this.$config.API.contentServerUrl+this.$config.API.pushContentPath,n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})),t.then(function(){e.$router.push({path:"/"})})},deleteContent:function(){var t=this;this.$http.delete(this.$config.API.contentServerUrl+this.$config.API.pushContentPath+this.$route.params.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then(function(){t.$router.push({path:"/"})})}}},m=u,v=(a("cfe4"),a("2877")),p=Object(v["a"])(m,n,i,!1,null,"c541adcc",null);p.options.__file="edit.vue";e["default"]=p.exports},cfe4:function(t,e,a){"use strict";var n=a("f4d2"),i=a.n(n);i.a},e829:function(t,e,a){a("2f37"),t.exports=a("584a").Date.now},f4d2:function(t,e,a){}}]);
//# sourceMappingURL=edit.f08e5e27.js.map